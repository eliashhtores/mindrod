{% extends 'admin/base-authenticated.html' %}
{% load tenant_role %}
{% block content %}
<!-- Date Range Filter row -->
<div class="row wrapper wrapper-content animated fadeInRight"></div>
{% include 'admin/datatables-report-daterange.html' %}
{% tenant_role "user" request as tenant_role_check %}

{% block stylesheet %}
<link href='/static/js/plugins/fullcalendar/fullcalendar.min.css' rel='stylesheet' />
<link href='/static/js/plugins/fullcalendar/fullcalendar.print.min.css' rel='stylesheet' media='print' />
{% endblock %}

<style>
.detail-txt:hover {
    text-decoration: underline;
}
.fc-day-grid-event {
    border-width: 8px 1px 3px;
    padding: 0;
}
.fc-title { text-transform: uppercase; font-size: 14px; font-weight: 800; margin-left: 1px; margin-right: 1px;}
.fc-content { margin-left: 1px; margin-right: 1px; }
</style>
    <!-- Enter/Edit Routing Schedule Modal -->
<div class="modal fade in" role="dialog" id="edit-routing-schedule-modal" style="display: none;">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                <h4 class="modal-title">Edit Scheduling</h4>
            </div>
            <div class="modal-body" id="modal-edit-wait-for-values">
                <span class="fa fa-spin fa-spinner"> Please wait a moment, values are loading...</span>
            </div>
            <div class="modal-body" id="modal-edit-values-loaded" style="display: none;">
                <form class="form-horizontal" id="modal-edit-customer-form">
                    <input type="hidden" name="customer_number">
                    <div class="form-group"><label class="col-sm-4 control-label">Routing Required</label>
                        <div class="col-sm-8">
                            <select class="form-control" name="routing_required">
                                <option selected value=""></option>
                                <option value="true">Yes</option>
                                <option value="false">No</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group"><label class="col-sm-4 control-label">Kitting Required</label>
                        <div class="col-sm-8">
                            <select class="form-control" name="kitting_required">
                                <option selected value=""></option>
                                <option value="true">Yes</option>
                                <option value="false">No</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group"><label class="col-sm-4 control-label">Routed</label>
                        <div class="col-sm-8">
                            <select class="form-control" name="routed">
                                <option selected value=""></option>
                                <option value="true">Yes</option>
                                <option value="false">No</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group"><label class="col-sm-4 control-label">Confirmed</label>
                        <div class="col-sm-8">
                            <select class="form-control" name="confirmed">
                                <option selected value=""></option>
                                <option value="true">Yes</option>
                                <option value="false">No</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group"><label class="col-sm-4 control-label">Ship As</label>
                        <div class="col-sm-8">
                            <select class="form-control" name="ship_as">
                                <option selected value=""></option>
                                <option value="INNER">Inners</option>
                                <option value="MASTER">Masters</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group"><label class="col-sm-4 control-label">Route Date</label>
                        <div class="col-sm-8"><input type="text" class="form-control" value="" name="route_date"></div>
                    </div>
                    <div class="form-group"><label class="col-sm-4 control-label">Pack Date</label>
                        <div class="col-sm-8"><input type="text" class="form-control" value="" name="pack_date"></div>
                    </div>
                    <div class="form-group"><label class="col-sm-4 control-label">Ship Date</label>
                        <div class="col-sm-8"><input type="text" class="form-control" value="" name="ship_date"></div>
                    </div>
                     <div class="form-group"><label class="col-sm-4 control-label">Updated Cancel Date</label>
                        <div class="col-sm-8"><input type="text" class="form-control" value="" name="updated_cancel_date"></div>
                    </div>
                    <div class="form-group"><label class="col-sm-4 control-label">Project</label>
                        <div class="col-sm-8">
                            <select class="form-control" name="project"></select>
                        </div>
                    </div>
                    <div class="form-group"><label class="col-sm-4 control-label">Comments</label>
                        <div class="col-sm-8"><textarea rows=3 class="form-control" name="scheduling_comments"></textarea></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="modal-routing-schedule-submit">Submit</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<div class="modal fade in" role="dialog" id="extra-info-modal" style="display: none;">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                <h4 class="modal-title">Company</h4>
            </div>
            <div class="modal-body">
                <table class="table table-striped">
                    <tr><td style="vertical-align: top; width: 50%;" class="text-right">Pick Count</td><td style="vertical-align: top; width: 50%;" id="pick-ticket-count"></td></tr>
                    <tr><td style="vertical-align: top; width: 50%;" class="text-right">Units on Picks</td><td style="vertical-align: top; width: 50%;" id="pick-ticket-units"></td></tr>
                    <tr><td style="vertical-align: top; width: 50%;" class="text-right">Unique SKUs on Picks</td><td style="vertical-align: top; width: 50%;" id="pick-ticket-skus"></td></tr>
                    <tr><td style="vertical-align: top; width: 50%;" class="text-right">Maximum SKUs per Pick</td><td style="vertical-align: top; width: 50%;" id="max-pick-ticket-skus"></td></tr>
                    <tr><td style="vertical-align: top; width: 50%;" class="text-right">Average SKUs per Pick</td><td style="vertical-align: top; width: 50%;" id="avg-pick-ticket-skus"></td></tr>
                    <tr><td style="vertical-align: top; width: 50%;" class="text-right">Ship As</td><td style="vertical-align: top; width: 50%;" id="ship-as-type"></td></tr>
                    <tr><td style="vertical-align: top; width: 50%;" class="text-right">Scheduling Comments</td><td style="vertical-align: top; width: 50%; white-space: pre-line;" id="scheduling-comments-info"></td></tr>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>

<div class="row">
    <div class="col-lg-12">
        <div class="tabs-container">
            <ul class="nav nav-tabs">
                <li class="active"><a data-toggle="tab" href="#open-orders-day">Day</a></li>
                <li class=""><a data-toggle="tab" href="#open-orders-facility">Day/Facility</a></li>
                {% if tenant_role_check %}
                <li class=""><a data-toggle="tab" href="#open-orders">Orders</a></li>
                <li class=""><a data-toggle="tab" href="#open-company">Company</a></li>
                {% endif %}
                <li class=""><a data-toggle="tab" href="#open-orders-b2b-schedule-calendar">Calendar</a></li>
                {% if tenant_role_check %}
                <li class=""><a data-toggle="tab" href="#open-items-agg">Items</a></li>
                <li class=""><a data-toggle="tab" href="#open-items">Items By Order</a></li>
                <li class=""><a data-toggle="tab" href="#open-backorders">Backorders</a></li>
                <li class=""><a data-toggle="tab" href="#open-rush">Rush</a></li>
                {% endif %}
                <!--<li class=""><a data-toggle="tab" href="#open-drop-ship">Drop Ship</a></li>
                <li class=""><a data-toggle="tab" href="#open-store-fulfillment">Store Fulfillment</a></li>-->
            </ul>

            <div class="tab-content">
                <div id="open-orders-day" class="tab-pane active">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 no-padding">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <span class="label label-primary pull-right summary_date_range"></span>
                                        <h5>Summary</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrders_orders_day"></h1>
                                                <div class="font-bold text-navy"><small>Open Orders</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrders_units_day"></h1>
                                                <div class="font-bold text-navy"><small>Open Units</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrders_cost_day"></h1>
                                                <div class="font-bold text-navy"><small>Cost</small></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <table class="table table-striped table-bordered dt-responsive nowrap" id="open-orders-day-table" cellspacing="0" width="100%">
                            <thead>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="open-orders-facility" class="tab-pane">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 no-padding">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <span class="label label-primary pull-right summary_date_range"></span>
                                        <h5>Summary</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrders_orders_facility"></h1>
                                                <div class="font-bold text-navy"><small>Open Orders</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrders_units_facility"></h1>
                                                <div class="font-bold text-navy"><small>Open Units</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrders_cost_facility"></h1>
                                                <div class="font-bold text-navy"><small>Cost</small></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <table class="table table-striped table-bordered dt-responsive nowrap" id="open-orders-facility-table" cellspacing="0" width="100%">
                            <thead>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                {% if tenant_role_check %}
                <div id="open-orders" class="tab-pane">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 no-padding">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <span class="label label-primary pull-right summary_date_range"></span>
                                        <h5>Summary</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrders_orders"></h1>
                                                <div class="font-bold text-navy"><small>Open Orders</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrders_units"></h1>
                                                <div class="font-bold text-navy"><small>Open Units</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrders_cost"></h1>
                                                <div class="font-bold text-navy"><small>Cost</small></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <table class="table table-striped table-bordered dt-responsive nowrap" id="open-orders-table" cellspacing="0" width="100%">
                            <thead>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="open-company" class="tab-pane">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 no-padding">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <span class="label label-primary pull-right summary_date_range"></span>
                                        <h5>Summary</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersCompany_orders"></h1>
                                                <div class="font-bold text-navy"><small>Open Orders</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersCompany_units"></h1>
                                                <div class="font-bold text-navy"><small>Open Units</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersCompany_merch"></h1>
                                                <div class="font-bold text-navy"><small>Merchandise</small></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <table class="table table-striped table-bordered dt-responsive nowrap" id="open-orders-company-table" cellspacing="0" width="100%">
                            <thead>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                {% endif %}
                <div id="open-orders-b2b-schedule-calendar" class="tab-pane">
                    <div class="row m-b-sm">
                        <div class="col-md-12">
                          <span class="pull-right">
                            <button type="button" class="btn btn-info ml-3" id="refresh-b2b-calendar"><i class="fa fa-refresh"></i> Refresh</button>
                          </span>
                        </div>
                    </div>
                    <div class="row m-b-lg">
                        <div class="col-lg-12">
                            <div class="panel-body">
                                <div id="b2b-calendar"></div>
                            </div>
                        </div>
                    </div>
                </div>

                {% if tenant_role_check %}
                <div id="open-items-agg" class="tab-pane">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 no-padding">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <span class="label label-primary pull-right summary_date_range"></span>
                                        <h5>Summary</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersByItemAgg_available"></h1>
                                                <div class="font-bold text-navy"><small>Available</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersByItemAgg_ordered"></h1>
                                                <div class="font-bold text-navy"><small>Ordered</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersByItemAgg_new"></h1>
                                                <div class="font-bold text-navy"><small>New</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersByItemAgg_printed"></h1>
                                                <div class="font-bold text-navy"><small>Printed</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersByItemAgg_shipped"></h1>
                                                <div class="font-bold text-navy"><small>Shipped</small></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <table class="table table-striped table-bordered dt-responsive nowrap" id="open-items-agg-table" cellspacing="0" width="100%">
                            <thead>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="open-items" class="tab-pane">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 no-padding">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <span class="label label-primary pull-right summary_date_range"></span>
                                        <h5>Summary</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersByItem_ordered"></h1>
                                                <div class="font-bold text-navy"><small>Ordered</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersByItem_allocated"></h1>
                                                <div class="font-bold text-navy"><small>Allocated</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersByItem_shipped"></h1>
                                                <div class="font-bold text-navy"><small>Shipped</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersByItem_available"></h1>
                                                <div class="font-bold text-navy"><small>Available</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersByItem_inbound"></h1>
                                                <div class="font-bold text-navy"><small>Inbound</small></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <table class="table table-striped table-bordered dt-responsive nowrap" id="open-items-table" cellspacing="0" width="100%">
                            <thead>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="open-backorders" class="tab-pane">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 no-padding">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <span class="label label-primary pull-right summary_date_range"></span>
                                        <h5>Summary</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersBackorders_orders"></h1>
                                                <div class="font-bold text-navy"><small>Total Orders</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersBackorders_qty_ordered"></h1>
                                                <div class="font-bold text-navy"><small>Qty Ordered</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersBackorders_qty_backordered"></h1>
                                                <div class="font-bold text-navy"><small>Qty BackOrdered</small></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <table class="table table-striped table-bordered dt-responsive nowrap" id="open-backorders-table" cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="open-rush" class="tab-pane">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-lg-12 no-padding">
                                <div class="ibox float-e-margins">
                                    <div class="ibox-title">
                                        <span class="label label-primary pull-right summary_date_range"></span>
                                        <h5>Summary</h5>
                                    </div>
                                    <div class="ibox-content">
                                        <div class="row">
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersRush_orders"></h1>
                                                <div class="font-bold text-navy"><small>Open Orders</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersRush_units"></h1>
                                                <div class="font-bold text-navy"><small>Open Units</small></div>
                                            </div>
                                            <div class="col-md-2">
                                                <h1 class="no-margins" id="openOrdersRush_cost"></h1>
                                                <div class="font-bold text-navy"><small>Cost</small></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <table class="table table-striped table-bordered dt-responsive nowrap" id="open-orders-rush-table" cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                {% endif %}
                <div id="open-drop-ship" class="tab-pane">
                    <div class="panel-body">
                        <table class="table table-striped table-bordered dt-responsive nowrap" id="open-drop-ship-table" cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                    <th>Order Number</th>
                                    <th>Order Date</th>
                                    <th>Item Code</th>
                                    <th>Item Description</th>
                                    <th>Ordered</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>State</th>
                                    <th>Zip</th>
                                    <th>Merchandise Amount</th>
                                    <th>Ship Via</th>
                                    <th>Vendor</th>
                                    <th>Email</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="open-store-fulfillment" class="tab-pane">
                    <div class="panel-body">
                        <table class="table table-striped table-bordered dt-responsive nowrap" id="open-store-fulfillment-table" cellspacing="0" width="100%">
                            <thead>
                                <tr>
                                    <th>Order Number</th>
                                    <th>Order Date</th>
                                    <th>Item Code</th>
                                    <th>Item Description</th>
                                    <th>Ordered</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Ship Via</th>
                                    <th>Pick Ticket Create Date</th>
                                </tr>
                            </thead>
                            <tbody>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block javascript %}
<script>
    date = '{{date}}';
    type = '{{type}}';
</script>
<script src="/static/js/plugins/fullcalendar/fullcalendar.min.js{{ cache_token }}"></script>
{% tenant_role "user" request as tenant_role_check %}
{% if tenant_role_check %}
<script src="/static/js/admin/order/open-orders.js{{ cache_token }}"></script>
{% else %}
<script src="/static/js/admin/order/open-orders-admin.js{{ cache_token }}"></script>
{% endif %}
{% endblock %}